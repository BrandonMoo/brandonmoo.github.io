---
layout: post
title:  "AIAD项目进度"
date:   2022-08-03 20:13:14 +0800
categories: regular update
---

## AIAD 智能评估展示进度
---
2022.08.03 慕朝壬

1. 需求描述： 完成AIAD软件涡轮机部分的智能评估页面的三维展示。要求使用vtk+qt代替pyvista，将三维点云重建为曲面并在qt窗口展示。展示文件源为三维点数据集，
每行为第i个点的x,y,z,Temperature，文件格式为txt/csv。




1. 使用vtkParticleReader完成对叶片三维数据的读取：

```
// This reads ascii files where each line consists of points with its
// position (x,y,z) and (optionally) one scalar.

  vtkNew<vtkParticleReader> reader;
  reader->SetFileName(filePath.c_str());
  reader->SetDataByteOrderToBigEndian();
  reader->Update();
```

![image](./wolun1.png)

存在问题：vtkMapper没展示读取的温度信息的颜色。

后续改进：尝试scalarbar和lookuptable显示温度。

解决办法：使用了mapper->setScalarRange(min, max)


3. 曲面重建部分，尝试使用vtkSurfaceReconstructionFilter以及
vtkExtractSurface。

前者使用等值面来构建曲面，但运行报错：内存错误
第二个算法待进一步尝试。

```
2022-08-03 17:02:55.709 ( 180.841s) [                ]vtkGenericDataArray.txx:389    ERR| vtkFloatArray (00000213370A5480): Unable to allocate 1636945881102 elements of size 4 bytes. 
ERROR: In e:\vtk9.0.1\vtk-9.0.1\common\core\vtkGenericDataArray.txx, line 389
vtkFloatArray (00000213370A5480): Unable to allocate 1636945881102 elements of size 4 bytes. 

17:03:03: 程序异常结束。
17:03:03: The process was ended forcefully.
17:03:04: E:\Code\output\bin\Design.exe crashed.
```

